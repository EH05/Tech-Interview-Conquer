# Chapter9. 응용 프로그램의 개발

---

## 1. 응용 프로그램과 사용자 인터페이스

<br>

1) DB를 바로 사용 : 사용자가 복잡한 SQL, 구조 등의 DB 지식이 필요
2) 사용자 PC에서 응용 프로그램 사용 : DB에 직접 접근하는 보안 문제, 응용 프로그램 변경 시 모든 사용자의 응용 프로그램을 갱신해야 하는 문제

<br>

> 사용자에게 DB의 복잡도가 노출되지 않으면서 보안, 갱신 문제를 해결할 수 있는 추상화 계층 설계가 필요

**사용자** --> **사용자 인터페이스**(웹 : 프론트엔드, 앱 : 응용 프로그램) --> **중간 계층 응용 프로그램**(서버 애플리케이션) --> **데이터베이스**

<br>

## 2. 웹의 기본

<br>

### 1) URL

> 웹을 통해 접근하는 문서의 고유 이름

![URL](https://github.com/liarreez/Tech-Interview-Conquer/blob/main/DataBase/img/url.png)

<br>

### 2) HTML/CSS/JavsScript

> 웹 페이지 구성(HTML), 시각적 표현(CSS), 동적 동작(JavaScript)담당 언어

<br>

### 3) HTTP

> 웹 브라우저와 웹 서버가 요청/응답 구조로 통신하기 위한 규약

<br>

### 4) 웹 서버

> 브라우저의 요청을 받아 결과를 반환하는 서버 측에서 동작하는 프로그램

- **세션** : 둘 이상의 통신 장치 간의 송수신 연결 상태
  * 세션 정보 : 인증, 장바구니 등 세션이 종료될 때까지 유지되는 사용자 정보
  * 쿠키 : 세션 정보가 클라이언트에 저장되는 방법 중 하나

<br>

## 3. 서블릿, 4. 서버 측 프레임워크 대안

<br>

> Java 기반의 응용 프로그램과 웹 서버가 통신하는 인터페이스

<br>

### 1) 동작 원리

1) 웹 서버가 클라이언트의 요청을 서블릿으로 전달
2) 서블릿은 요청 파라미터를 분석하고 필요한 로직을 수행
3) 결과를 HTML 등으로 만들어 response 객체에 작성
4) 웹 서버가 response를 클라이언트에 전송

<br>

### 2) 서블릿 생명 주기

1) 요청에 대한 서블릿 인스턴스가 존재하는지 확인, 없다면 인스턴스 생성 및 초기화(init())
2) 서블릿 인스턴스는 request, response를 매개변수로 service 메소드 호출
3) 서버는 service 메소드를 위한 스레드 생성
4) 필요 없는 서블릿은 destroy() 메소드를 호출하거나 자동 설정을 통해 종료

<br>

### 3) 서버 측 프레임워크 대안

1) **JSP(JavaServer Pages)** : HTML 문서 안에 자바 코드를 내장할 수 있는 템플릿 방식
2) **PHP(Hypertext Preprocessor)** : 대표적인 범용 서버 스크립팅 언어
**3) Django** : 파이썬 기반 웹 프레임 워크, Django의 뷰(Views)는 Java의 서블릿과 동등한 함수

<br>

## 5. 클라이언트 측 코드와 웹 서비스

<br>

### 1) JavaScript

> 대표적인 클라이언트 측 스크립팅 언어

<br>

- **JQuey** : JavaScript 언어의 브라우저 간 차이를 극복하기 위한 라이브러리
- **Ajax** : 비동기 통신을 통해 데이터를 주고 받으며 동적인 페이지를 보여주는 JavaScript 기능
- **JSON** : 서버와 데이터를 주고받을 때 JavaScript에서 주로 사용하는 포맷

### 2) 웹 서비스

> 웹과 함수상에서 호출될 수 있는 응용 프로그램 요소

<br>

- **REST(Representation State Transfer)** : HTTP 요청을 통해 자원을 조작하는 아키텍처 스타일
- **Local Storage** : 연결되지 않은 경우에도 작업을 지원할 수 있도록 HTML5에서 제공하는 저장 공간

<br>

### 3) 모바일 응용 프로그램

<br>

- 모바일 플랫폼 : 안드로이드, iOS
- 플랫폼 상관 없는 개발 플랫폼 : React Native, Flutter
- **PWA(Progressive Web Apps)** : 웹 앱과 모바일 앱의 장점을 혼합한 반응형 웹 앱

## 6. 응용 프로그램 구조

<br>

 - 표현 계층 : **MVC(model-view-controller)** 구조를 주로 사용
   * **model** : 비즈니스 로직 계층
   * **view** : 데이터 표현 정의
   * **controller** : 사용자 입력을 받아 model에서 작업을 수행하고 결과를 출력하는 역할
 - 비즈니스 로직 계층 : 비즈니스 규칙 및 작업을 위한 워크플로에 따라 작업을 수행하는 계층
 - 데이터 접근 계층
   * 데이터베이스의 데이터 모델을 그대로 사용
   * 객체와 객체 사이의 관계를 사용할 수 있는 데이터베이스 사용, 거의 사용 안함
   * 객체와 릴레이션의 데이터를 자동 매핑
     - **객체-관계 매핑(object-relational mapping)** 시스템 : Hibernate, Djongo ORM

<br>

## 7. 응용 프로그램 성능

<br>

1) 캐싱 : 자주 조회되는 데이터를 DB 대신 메모리에 저장(memcached, Redis 등)
2) 연결 풀 : DB 연결 생성 비용이 크므로, 일정 수의 연결을 미리 만들어 두고 재사용
3) 병렬 처리 : 많은 수의 응용 프로그램 서버를 병력적으로 실행

<br>

## 2. 응용 프로그램 보안

<br>

### 1) SQL 삽입(SQL injection)

> 공격자가 생성한 SQL 질의를 응용 프로그램이 수행하도록 만드는 것

**예방 방법**
1) 준비된 질의문
2) 입력값 이스케이프

<br>

### 2) XSS(cross-site scripting), CSRF(cross-site request forgery)

1) XSS : 악성 스크립트가 삽입된 콘텐츠를 다른 사용자 브라우저에서 실행하여 사용자 정보를 탈취
2) CSRF : 사용자가 의도치 않은 요청을 외부 사이트에서 강제로 보내도록 유도br>

## 5. 클라이언트 측 코드와 웹 서비스

<br>

### 1) JavaScript

> 대표적인 클라이언트 측 스크립팅 언어

<br>

- **JQuey** : JavaScript 언어의 브라우저 간 차이를 극복하기 위한 라이브러리
- **Ajax** : 비동기 통신을 통해 데이터를 주고 받으며 동적인 페이지를 보여주는 JavaScript 기능
- **JSON** : 서버와 데이터를 주고받을 때 JavaScript에서 주로 사용하는 포맷

### 2) 웹 서비스

> 웹과 함수상에서 호출될 수 있는 응용 프로그램 요소

<br>

- **REST(Representation State Transfer)** : HTTP 요청을 통해 자원을 조작하는 아키텍처 스타일
- **Local Storage** : 연결되지 않은 경우에도 작업을 지원할 수 있도록 HTML5에서 제공하는 저장 공간

<br>

### 3) 모바일 응용 프로그램

<br>

- 모바일 플랫폼 : 안드로이드, iOS
- 플랫폼 상관 없는 개발 플랫폼 : React Native, Flutter
- **PWA(Progressive Web Apps)** : 웹 앱과 모바일 앱의 장점을 혼합한 반응형 웹 앱

## 6. 응용 프로그램 구조

<br>

 - 표현 계층 : **MVC(model-view-controller)** 구조를 주로 사용
   * **model** : 비즈니스 로직 계층
   * **view** : 데이터 표현 정의
   * **controller** : 사용자 입력을 받아 model에서 작업을 수행하고 결과를 출력하는 역할
 - 비즈니스 로직 계층 : 비즈니스 규칙 및 작업을 위한 워크플로에 따라 작업을 수행하는 계층
 - 데이터 접근 계층
   * 데이터베이스의 데이터 모델을 그대로 사용
   * 객체와 객체 사이의 관계를 사용할 수 있는 데이터베이스 사용, 거의 사용 안함
   * 객체와 릴레이션의 데이터를 자동 매핑
     - **객체-관계 매핑(object-relational mapping)** 시스템 : Hibernate, Djongo ORM

<br>

## 7. 응용 프로그램 성능

<br>

1) 캐싱 : 자주 조회되는 데이터를 DB 대신 메모리에 저장(memcached, Redis 등)
2) 연결 풀 : DB 연결 생성 비용이 크므로, 일정 수의 연결을 미리 만들어 두고 재사용
3) 병렬 처리 : 많은 수의 응용 프로그램 서버를 병력적으로 실행

<br>

## 8. 응용 프로그램 보안

<br>

### 1) SQL 삽입(SQL injection)

> 공격자가 생성한 SQL 질의를 응용 프로그램이 수행하도록 만드는 것

**예방 방법**
1) 준비된 질의문
2) 입력값 이스케이프

<br>

### 2) XSS(cross-site scripting), CSRF(cross-site request forgery)

1) XSS : 악성 스크립트가 삽입된 콘텐츠를 다른 사용자 브라우저에서 실행하여 사용자 정보를 탈취
2) CSRF : 사용자가 의도치 않은 요청을 외부 사이트에서 강제로 보내도록 유도

**예방 방법**
1) HTML 태그 입력 금지
2) 리퍼러(referer) 확인
3) 세션 이용 가능 IP 제한

<br>

### 3) 그 외

1) 비밀번호 암호화
2) 2단계 인증
3) 중간자 공격 : 가짜 웹사이트로 유도하여 인증 정보 얻어내기, HTTPS 사용으로 예방
4) 통합 인증 : SAML, OAuth

<br>

## 9. 암호화와 응용

<br>

### 1) 대칭키 암호화

> 암호화와 복호화에 같은 키를 사용

- 장점 : 연산 속도가 빠르고 구현이 간단
- 단점 : 공유키 전송 및 사전 공격(salt 기법으로 예방)과 같은 보안상 약점이 있음
- 종류 : AES, DES 등

<br>

### 2) 공개키 암호화

> 암호화(공개키)와 복호화(비밀키)에 사용하는 키가 다름

- 장점 : 비밀키는 소유자만 알고 있으므로 보안에 유리
- 단점 : 대칭키에 비해 연산이 느림
- 종류 : RSA, ECC 등

<br>

### 3) 그 외

1) 데이터베이스가 지원하는 암호화 사용
2) 시도-응답 인증 : 서버가 제시하는 시도 값에 알맞은 응답값을 사용자가 제시(OTP 등)
3) 전자 서명 : 자료가 서명한 사람에 의해 생성되었음을 확인하는 자료
4) 전자 인증서 : 잘 알려진 인증 기관의 서명을 받은 공개키를 사용
