# 물리적 저장 장치 시스템

---

<br>

## 1. 물리적 저장 장치 매체 개요
저장 장치 매체는 데이터에 접근하는 속도, 해당 매체를 구매하기 위해 드는 데이터 단위당 비용, 그리고 매체의 신뢰성에 따라 분류할 수 있다.

<br>

### 캐시, Cache
- 저장 장치 중에서 가장 빠르고 비싸다.
- 캐시 메모리는 크기가 상대적으로 작다.
- 컴퓨터 시스템 하드웨어가 캐시의 사용을 관리한다.
<br>

### 메인 메모리, Main memory
- 연산에 사용할 데이터를 저장하기 위한 저장 장치이다.
- 일반적으로, 매우 큰 데이터베이스에 대해서 그 전체를 저장하기에 메인 메모리는 너무 작거나 비싸다.
- 하지만 기업용 데이터베이스의 경우 메인 메모리에 모두 적재가 가능하다.
- 메인 메모리의 내용은 정전이나 시스템 충돌이 발생하면 잃어버리게 된다.
  > 휘발성(volatile)의 특징을 갖고 있다고도 표현한다.
<br>

### 플래시 메모리, Flash memory
- 비휘발성(non-volatile) : 메인 메모리와 달리 정전이 발생해도 데이터가 남아있다.
- 메인 메모리에 비교해 바이트당 비용이 더 낮지만, 자기 디스크보다 바이트당 비용은 더 비싸다.
- 카메라 및 휴대폰 등 장치의 데이터 저장소로서 플래시 메모리를 폭넓게 사용하고 있다.
<br>

### 솔리드 스테이트 드라이브, solid-state drive, SSD
- 솔리드 스테이트 드라이브(solid-state drive, SSD)는 내부적으로 플래시 메모리를 사용하여 데이터를 저장한다.
- 하지만 자기 디스크와 유사한 인터페이스를 제공하여 데이터를 블록 단위로 저장하거나 검색할 수 있다.
  > 해당 인터페이스를 블록 지향 인터페이스(block-oriented interface)라고 부른다.
<br>

### 자기 디스크 저장 장치, Magnetic-disk storage
- 온라인으로 장기간 데이터를 저장하기 위한 주된 매체이다.
- 하드 디스크 드라이브(hard disk drive, HDD)라고도 한다.
- 비휘발성(non-volatile)이다.
  > 자기 디스크에 저장된 데이터에 접근하려면 시스템은 먼저 데이터에 접근할 수 있는 디스크에서 메인 메모리로 데이터를 이동시켜야 한다.   
  > 그 다음, 시스템이 지정한 작업을 수행한 후 수정된 데이터를 디스크에 기록해야 한다.
<br>

### 광학 저장 장치, Optical storage
- DVD(Digital Video Disk)는 레이저 광원을 사용하여 데이터를 쓰고 다시 읽는 광학 저장 매체다.
- 데이터베이스 콘텐츠 백업을 포함하여 모든 유형의 디지털 데이터를 저장할 수 있다.
- 이는 특정 데이터에 접근하는 데 필요한 시간이 자기 디스크에 걸리는 시간에 비교해 상당히 길 수 있으므로, 활성 중인 데이터베이스 데이터를 저장하는 데 적합하지 않다.
- 일부 DVD 버전은 생산된 공장에서만 기록되는 읽기 전용(read-only)이며, 다른 버전은 단 한 번 기록(write-once)을 지원하기 때문에 한 번만 기록할 수 있고 덮어쓸 수 없다. 일부 다른 버전에서는 여러 번 재기록할 수 있다.
<br>

### 테이프 저장 장치, Tape storage
- 주로 데이터 백업과 보관용으로 테이프 저장 장치를 사용한다.
- 자기 테이프는 디스크보다 저렴하며 수년 동안 데이터를 안전하게 저장할 수 있다.
- 순차 접근 저장 장치(sequential-access storgae) → 테이프 시작부터 순차적으로 접근해야 하므로 데이터 접근이 훨씬 더 느리다.
  > 반대로, 자기 디스크와 SSD 저장 장치는 데이터가 어디에 위치하든지 데이터를 읽을 수 있으므로 직접 접근 저장 장치(direct-access storage)라고 불린다.
<br>

### 저장 장치 계층
- 다양한 저장 매체는 속도와 비용에 따라서 계층 구조로 나타낼 수 있다.
- 이 둘 사이에는 합리적인 상반관계(trade-off)가 존재한다.
  > 계층의 높은 단계로 갈수록 비싸지만 빠르다.   
  > 계층의 낮은 단계로 갈수록 비트당 비용은 감소하고, 접근 시간은 증가한다.
- **1차 저장 장치, primary storage**
  - 캐시
  - 메인 메모리
- **2차 저장 장치, secondary storage**[=온라인 저장 장치(online storage)]
  - 플래시 메모리
  - 자기 디스크
- **3차 저장 장치, tertiary storage**[=오프라인 저장 장치(offline storage)]
  - 자기 테이프
  - 광디스크 주크박스

<br>

## 2. 저장 장치 인터페이스

<br>

### 직렬 ATA(SATA), 직렬 부착 SCSI(SAS)
- 디스크는 일반적으로 SATA 인터페이스 또는 SAS 인터페이스를 지원한다.
  - SATA 3 : 초당 6기가바이트
  - SAS Version 3 : 초당 12기가바이트
- SAS 인터페이스는 일반적으로 서버에서만 사용된다.
<br>

### 비휘발성 메모리 익스프레스(Non-volatile Memory Express, NVMe)
- SSD를 더 잘 지원하기 위해 개발한 논리 인터페이스 표준
- 일반적으로 PCIe 인터페이스와 함께 사용된다.
  > PCIe 인터페이스 : 컴퓨터 시스템 내부에서 고속 데이터 전송을 제공한다. (lower latency & higher transfer rates)
- 초당 24기가바이트
<br>

### SAN(storage area network)
> 일반적으로 케이블을 통해 컴퓨터 시스템의 디스크 인터페이스에 디스크를 직접 연결하지만, 고속 네트워크를 통해 원격에 위치한 컴퓨터에 연결할 수도 있다.
- 많은 수의 디스크가 고속 네트워크를 통해 여러 서버 컴퓨터에 연결된다.
- 독립적인 디스크의 중복적인 배열(redundant arrays of independent disks, RAID)이라고 불리는 저장 장치 조직 기법을 사용해 디스크를 지역적으로 조작한다.
- SAN에 사용되는 상호 연결 기술들
  - iSCSI : SCSI 명령을 IP 네트워크를 통해 전송할 수 있다.
  - FiberChannel, FC : 버전에 따라 초당 1.6~12기가바이트의 전송 속도를 지원한다.
  - InfiniBand : 매우 낮은 대기 시간의 고대역폭 네트워크 통신을 제공한다.
<br>

### NAS(network attached storage)
- SAN의 대안이다.
- 큰 디스크처럼 보이는 네트워크 저장 장치 대신, NFS 또는 CIFS와 같은 네트워크 파일 시스템 규약을 사용하여 파일 시스템 인터페이스를 제공한다.
<br>

### 클라우드 저장 장치(cloud storage)
- 클라우드에 데이터를 저장하고 API를 통해 접근한다.
- 데이터가 데이터베이스와 같은 위치에 있지 않은 경우, 수십에서 수백 밀리초의 매우 긴 지연 시간을 가진다
- 응용 프로그램의 경우 객체를 저장하기 위해 종종 클라우드 저장 장치를 사용한다.

<br>

## 3. 자기 디스크
- 최근 컴퓨터 시스템을 위한 대량의 보조 저장 장치로 자기 디스크를 사용한다.
- 최근 SSD의 저장 용량 빠르게 증가하고 비용이 빠르게 감소하고 있다.
- SSD가 자기 디스크의 경쟁자로 부상하고 있지만 아직도 저장 비용이 6~8배 가량 차이가 존재한다.

<br>

### 3-1. 디스크의 물리적 특성
- 플레터(platter) : 디스크 내부에 존재하는 디스크 판으로 금속이나 유리로 제작되며 형태는 납작한 원형이다. 디스크 양쪽 표면은 자기적인 물질로 덮여 있고 정보는 표면에 기록된다.
- 트랙(track) : 디스크의 표면을 논리적으로 나눈 하나의 파트
- 섹터(sector) : 디스크로부터 읽고 쓸수 있는 정보의 가장 작은 단위, 크기는 보통 512바이트이다.
- 판독-기록 헤드(read-write head) : 자기 물질의 자화와 반대 방향으로 회전하면서 자기적으로 섹터 위에 정보를 저장한다.
- 디스크 암(disk arm) : 헤드가 위치하는 장소
- 헤드-디스크 어셈블리(head-disk assembly) : 디스크 판 + 디스크 암 위에 있는 헤드
- 실린더(cylinder) : 모든 디스크 판의 트랙
- 헤드 충돌(head crash) : 헤드가 디스크 표면에 접촉하며 기록을 읽는데 접촉 과정중 생긴 부산물이 다른 헤드와 충돌하며 전체 디스크의 고장이 일어나는 현상
- 디스크 컨트롤러(disk controller) : 컴퓨터 시스템과 디스크 드라이브의 하드웨어를 연결, 최근에는 디스크 드라이브 내에 구현
- 체크섬(checksum) : 중복 검사의 한 형태로, 오류 정정을 통해, 기억 장치 속에서 송신된 자료의 무결성을 보호하는 단순한 방법
- 손상된 섹터의 재배치(remapping of bad sector) : 디스크가 초기화되거나 섹터 쓰기가 시도될때 컨트롤러가 섹터의 손상을 감지해 섹터를 다른 물리적 위치에 배치
<br>

### 3-2. 디스크의 성능 측정
디스크의 우수성에 대한 주요 측정은 용량, 접근 시간, 데이터 전송 속도와 신뢰성에 대해서 이루어진다.
- 접근 시간 : 읽기나 쓰기를 요구 받았을 때부터 데이터가 전송되기 시작할 때까지의 시간
- 탐색 시간 : 디스크 암을 재위치 하는데 걸리는 시간
- 평균 탐색 시간 (average seek time) : 디스크 드라이브 헤드가 트랙 간에 소스와 실린더를 탐색하는 평균 시간. 보통 최악 탐색 시간의 1/2이다.
- 회전 지연 시간 (rotational latency time) : 디스크 파일 또는 드럼 파일 접근 시 그 회전에 의해 지연되는 시간.
- 평균 지연 시간 (average latency time) : 디스크 전체 회전 시간의 1/2
- 데이터 전송 속도(data-transfer rate) : 데이터를 디스크로부터 검색하거나 디스크에 저장될 수 있는 비율이다.
- 디스크 블록(disk block)은 저장 장치 할당 및 검색의 논리적 단위이다.
  - 디스크 블록에 대한 접근 요청의 종류:
    - 순차적 접근 유형 : 데이터가 연속적으로 배치되어 있을 때, 한 번의 탐색 및 회전 지연 후 여러 블록을 연속해서 읽거나 쓸 수 있어 전송 효율이 높아집니다.
    - 임의 접근 유형 : 데이터가 임의의 위치에 분산되어 있을 때, 각 I/O 요청마다 별도의 탐색 시간과 회전 지연이 발생하게 되어 전체 평균 접근 시간이 증가합니다.
- MTTF(mean time to failure) : 디스크 신뢰 측정의 방법. 평균적으로 시스템이 아무 실패 없이 계속해서 동작할 수 있는 시간

<br>

## 4. 플래시 메모리
플래시 메모리에는 NOR 플래시와 NAND 플래시의 두 종류가 존재한다.

<br>

### NAND 플래시
- 데이터 저장 장치에 주로 사용되는 변종으로, 반도체의 셀이 직렬으로 배열되어 있다.
- NAND 플래시로부터 읽기는 일반적으로 4킬로바이트 단위의 데이터의 전체 페이지(page)를 필요로 하는데, 이 전체 페이지를 NAND 플래시에서 메인 메모리로 읽어들여야 한다.
- 플래시 메모리로 한 페이지를 쓰는 데 보통 100마이크로초가 걸린다.
- 하지만 플래시 메모리의 페이지가 한 번 쓰이면 해당 페이지에 직접 덮어쓰기(overwrite)을 할 수 없고, 대신에 페이지를 지우고(erase) 이어서 다시 쓰기를 해야 한다.
  - 지움 블록(erase block)이라고 불리는 페이지 그룹에 대해 지움 연산을 수행하며, 대략 2~5 밀리초 정도의 시간이 든다.
  - 지움 블록의 크기는 일반적으로 256킬로바이트에서 1메가바이트에 이르며, 한 개의 지움 블록은 대략 128~256개의 페이지로 되어 있다.
  - 보통 100,000~1,000,000회 정도로 플래시 페이지를 지울 수 있는 횟수가 제한되어 있다.
  - 이 기준에 도달하게 되면 저장 비트 내에 오류가 발생할 가능성이 있다.
- 플래시 메모리 시스템은 논리적 페이지 주소를 물리적(실제) 페이지 주소에 매핑(mapping)함으로써 느린 지움 속도와 갱신 횟수 제한으로 인해 받는 영향을 최소화한다.
- 논리적 페이지를 수정하면 이미 지운 물리적 페이지에 다시 대응해야 하고, 나중에 기존 위치에 있는 데이터를 지워야 한다.
- 각 물리적 페이지는 자신의 논리적 주소를 저장한 메모리의 작은 부분을 차지한다.
- 각 물리적 페이지는 자신의 논리적 주소를 저장한 메모리의 작은 부분을 차지한다.
- 신속한 접근을 위해, 논리적 페이지의 물리적 페이지 대응 정보(logical-to-physical mapping, L2P)는 메모리 내 변환 테이블(translation table)로 복제된다.
- 플래시 메모리는 다수의 삭제된 페이지를 포함하는 블록을 주기적으로 지운다.
  - 그 블록 내에 있는 지우지 않은 페이지를 다른 블록에 복사한다. 이때 변환 테이블은 그러한 안 지운 페이지에 대한 정보를 갱신한다.
  - 각 물리적 페이지는 주어진 갱신 횟수 범위 안에서만 갱신될 수 있다.
    - 여러 번 지워졌던 물리적 페이지에는 거의 갱신 되지 않은 데이터라는 의미로 “cold data”가 할당된다.
    - 많이 지워지지 않았던 페이지는 자주 갱신되는 데이터라는 의미로 “hot data”가 저장된다.
  - 물리적 블록에 걸쳐서 골고루 지움 연산을 불포시키는 원리를 평등화 작업(wear leveling)이라고 부른다.
- 플래시 변환 계층(flash translation layer)이라고 부르는 소프트웨어 계층이 위의 모든 동작을 수행한다.
- 하드브리드 디스크 드라이브(hybrid disk dirve) : 빈번하게 접근하는 데이터를 위한 캐시로서 사용하기 위한 소량의 플래시 메모리에 자기 저장 장치를 결합한 하드 디스크 시스템
  - 갱신이 거의 없으면서 자주 접근하는 데이터 캐싱하기 적합

<br>

## 5. RAID
여러 개의 독립 디스크를 하나의 논리적 장치로 구성하여, 데이터 신뢰성과 I/O 성능을 동시에 향상시키는 기술. 중복 저장과 병렬 처리를 통해 단일 디스크의 한계를 극복

<br>

### 1. 중복에 의한 신뢰성 향상
- 중복(redundancy) : 디스크 실패 시 손실된 정보를 복원하는데 사용할 수 있는 여분의 정보를 저장하는 것.
- 미러링(mirroring, 그림자형(shdowing)): 동일 데이터를 두 개 이상의 디스크에 저장해 하나의 디스크 장애 시 데이터 복구 가능.
  - 데이터 손실은 모든 디스크가 실패했을 때만 일어난다.
- MTTF (Mean Time To Failure) : 개별 디스크의 평균 고장 시간을 의미하며, 통계적으로 디스크가 정상적으로 동작하다가 고장이 발생하기까지 걸리는 평균 시간을 나타낸다.
  - MTTF가 길수록 디스크의 신뢰성이 높다고 볼 수 있으나, RAID 시스템에서는 단순히 개별 MTTF만으로 전체 신뢰성을 판단할 수는 없다.
- Mean Time To Repair (MTTR) : 한 디스크가 고장난 후, 해당 디스크를 교체하거나 복구하여 RAID 배열을 완전히 복원하는 데 걸리는 평균 시간을 의미한다.
  - MTTR이 짧을수록, 장애 발생 후 시스템이 빠르게 복구되어 두 번째 디스크가 실패할 위험(데이터 손실 확률)을 줄일 수 있습니다.
- Mean Time To Data Loss (MTTDL) : RAID 시스템에서 첫 번째 디스크 고장 후, 복구되기 전에 두 번째 디스크가 고장하여 데이터 손실이 발생할 때까지 걸리는 평균 시간을 나타낸다.
  - 간단한 모델에서는, 두 개의 디스크가 독립적으로 실패한다고 가정할 때, MTTDL는 대략 (MTTF²) / (2 × MTTR) 형태로 추정할 수 있다.
  - MTTDL은 RAID 1 시스템의 실제 신뢰성을 평가할 때 중요한 지표로, 단순 MTTF만 고려할 때보다 시스템 전체의 위험성을 보다 명확히 파악할 수 있게 합니다.
<br>

### 2. 병렬화에 의한 성능 향상
- 디스크 미러링으로 읽기 요청시 각 디스크에 보내어 읽기 요청 처리 속도가 2배가 된다.
- 비트 단위 분산 (Bit-level Striping) : 데이터를 한 비트씩 아주 세밀하게 분산시켜 여러 디스크에 동시에 저장하는 방식입니다.
  - 이론적으로는 단일 I/O 요청에 대해 모든 디스크가 동시에 참여할 수 있으므로, 아주 높은 수준의 병렬 처리가 가능해집니다.
  - 너무 세밀한 분산으로 인해 데이터 재구성 및 에러 복구가 복잡해지고, 실제 구현에서는 동기화 및 제어 오버헤드가 매우 커질 수 있습니다.
  - 일반적인 시스템에서는 구현의 복잡성과 비용 때문에 많이 사용되지 않습니다.
- 블록 단위 분산 (Block-level Striping) : 데이터를 일정 크기의 블록(또는 스트라이프) 단위로 나누어 각 블록을 여러 디스크에 분산 저장하는 방식입니다.
  - 블록 단위로 분산하기 때문에 비트 단위보다 제어 오버헤드가 낮아 구현이 상대적으로 용이합니다.
  - 대형 데이터 파일의 순차 읽기/쓰기를 할 때, 여러 디스크가 동시에 작업을 수행하여 전반적인 I/O 처리량을 크게 향상시킬 수 있습니다.
  - 스트라이프 크기(블록 크기)를 조절하여 응용 프로그램의 I/O 패턴에 맞게 성능과 오버헤드 사이의 균형을 맞출 수 있습니다.
  - 스트라이프 크기가 너무 작으면 오버헤드가 증가하고, 너무 크면 병렬 처리의 이점을 충분히 누리지 못할 수 있습니다.
- 디스크 시스템 병렬화의 목적
  - 작은 접근의 처리량을 증가시키기 위해 복수의 작은 접근(즉 블록 접근)을 부하 분산(load-balance)하는 것
  - 큰 접근에 대한 응답 시간을 줄이기 위해 큰 접근을 병렬화하는 것
<br>

### 3. RAID 수준
- RAID 0 (스트라이핑): 블록 단위로 분산하는 디스크 배열을 의미하며 중복은 존재하지 않는다.
- RAID 1 (미러링): 동일 데이터를 복제하여 저장, 빠른 복구와 높은 신뢰성 제공. 저장 용량의 절반만 활용 가능.
- RAID 5 (스트라이핑+패리티): 데이터와 패리티 정보를 분산 저장해 성능과 신뢰성의 균형을 도모. 패리티 계산으로 인한 쓰기 오버헤드.
- RAID 6 (이중 패리티): RAID 5와 유사하나, 이중 패리티를 사용하여 두 개의 디스크 장애까지 견딜 수 있음. 추가 패리티 연산으로 인한 성능 저하 가능.
<br>

### 4. 하드웨어 사안
- Software RAID: 운영 체제나 소프트웨어 계층에서 RAID 기능을 구현하는 방식
  - 추가 비용이 적고, 유연하게 구성이 가능함
  - RAID 관련 연산을 주 CPU가 담당하여, 시스템 부하 및 성능 저하의 원인이 될 수 있음
  - 재동기화 진행 동안 정상적인 읽기 및 쓰기를 허용하지만, 이 단계에서 디스크 오류가 발생하면 쓰기가 완료되지 않은 블록의 데이터가 손실될 수 있다.
    - 재동기화 : 디스크 교체나 복구 후, RAID 배열 내의 모든 디스크에 저장된 데이터의 일관성을 맞추기 위해 전체 데이터를 다시 동기화하는 작업. 데이터 무결성을 보장하고, 장애 발생 후 복구 과정에서 발생할 수 있는 불일치 문제를 해결
- Hardware RAID: 전용 RAID 컨트롤러 카드나 ASIC 같은 전용 하드웨어를 이용해 RAID 기능을 구현
  - 전용 프로세서를 사용하여 연산을 처리하므로 CPU 부하를 줄이고, 보다 빠른 성능과 높은 안정성을 제공함
  - 비용이 높고, 전용 하드웨어에 의존하므로 확장성이나 업그레이드에 제약이 있을 수 있음
- 다양한 이유로 적절하게 완료된 쓰기 부분을 읽을 수 없는 경우가 존재
  - 지연실패 (Deferred Failure) : 디스크에 경미한 오류나 불안정성이 감지되었을 때, 즉각적인 실패 처리를 하지 않고 일정 시간 동안 모니터링 하거나 조건이 충족될 때까지 실패를 지연시키는 전략
  - 비트부식 (Bit Rot) : 저장 매체에 저장된 데이터의 비트가 시간이 지남에 따라 점진적으로 손상되는 현상
- 스크러빙 (Scrubbing) : RAID 시스템 내에서 주기적으로 데이터를 읽어 들여 비트부식이나 미세한 오류를 감지하고, 패리티 정보 등을 활용해 자동으로 수정하는 과정, 미세한 데이터 손상 오류를 조기에 발견·수정하여, 장기적으로 데이터 무결성을 유지함
- 핫 스와핑 (Hot Swapping) : 시스템을 중단하지 않고, 작동 중인 RAID 배열에서 고장난 디스크를 안전하게 분리하고 새 디스크로 교체할 수 있는 기능, 서비스 중단 없이 장애 디스크를 교체하여, 빠른 재동기화와 데이터 복구가 가능하도록 지원
<br>

### 5. RAID 수준의 선택
RAID 수준을 선택할때 고려해야 할 요인
- 여분의 디스크 저장 장치 요구 사항에 대한 금전 비용
- 초당 I/O 연산에 관한 성능 요구 사항
- 디스크 실패 시 성능
- 재구축 동안(즉 실패된 디스크에 있는 데이터를 새로운 디스크에 재구축하는 동안)의 성능
<br>

## 6. 디스크 블록 접근
데이터베이스 시스템은 대부분의 디스크 I/O를 담당하는 질의 처리 서브시스템과 함께 디스크 I/O에 대한 요청을 생성한다. 각 요청은 디스크의 디스크 식별자와 논리 블록 번호로 구성된다.
- 디스크 블록에 대한 일련의 요청은 순차적 접근 유형 또는 임의 접근 유형으로 분류한다.
  - 순차적 접근 유형에서 연속적인 요청(successive request)은 같은 트랙 혹은 인접한 트랙에 있는 연속적인 블록을 대상으로 한다.
  - 임의 접근 유형에서 연속적인 데이터의 요청은 디스크상의 임의 위치한 블록을 대상으로 한다. 이러한 각 요청은 탐색이 필요하므로 접근 시간이 길어지고 초당 임의 I/O 연산 수가 줄어들게 된다.
- 접근 횟수를 최소화함으로써, 특히 임의 접근 횟수를 최소화함으로써 블록에 대한 접근 속도를 향상하기 위한 많은 기법을 개발해왔다.
- 자기 디스크에 저장된 데이터에 대한 임의 접근 횟수를 줄이는 것은 성능에 매우 중요하다.
  
<br>

### 버퍼링, Buffering
- 다음에 있을 요청을 충족하기 위해 디스크로부터 읽는 블록을 메모리 버퍼 내에 임시로 저장하는 기법이다.
<br>

### 미리 읽기, Read-ahead
- 디스크 블록에 접근할 때, 블록에 대한 요청이 없더라도 동일 트랙 내의 연속적인 블록을 일단 메모리 내의 버퍼로 읽어들이는 기법이다.
  - 순차적 접근의 경우, 이러한 미리 읽기는 많은 블록이 요청되더라도 이미 메모리 내에 있게 되기 때문에 블록 읽기당 디스크 탐색과 회전 지연에 낭비되는 시간을 최소화할 수 있다.
  - 임의 블록 접근의 경우 미리 읽기는 크게 유용하지 않다.
<br>

### 스케줄링, Scheduling
- 실린더에 있는 몇 개의 블록을 디스크에서 메인 메모리로 전송할 필요가 있다면 헤드 아래로 지나갈 순서대로 블록을 요청함으로써 접근 시간을 줄일 수 있다.
- 디스크 암 스케줄링(disk-arm-scheduling) 알고리즘은 처리할 수 있는 접근 수를 최대한 증가시키는 방식으로 트랙 접근 순서를 정하려고 한다.
  > 일반적으로 사용되는 알고리즘 : 승강기 알고리즘(elevator algorithm)
- 디스크 컨트롤러는 디스크 블록의 구성, 디스크 판의 회전 위치, 그리고 디스크 암의 위치에 대해 상세히 알고 있다.
- 따라서 보통 디스크 컨트롤러가 성능을 향상하기 위해 읽기 요구의 순서를 재구성하는 일을 수행한다.
- 이러한 재정렬을 활성화하려면 디스크 컨트롤러 인터페이스에서 대기열에 여러 요청을 추가할 수 있어야 한다
<br>

### 파일 구성, File organization
- 블록 접근 시간을 줄이기 위해 데이터에 접근하고자 하는 방식에 가장 가까이 부합하는 방식으로 디스크의 블록을 조직할 수 있다.
- 최신 디스크는 운영체제에서 정확한 블록 위치를 숨기지만 서로 인접한 블록에 연속 번호를 부여하는 논리적 블록 번호를 사용한다.
- 연속되는 번호를 매긴 디스크 블록에 파일의 연속 블록(consecutive block)을 할당함으로써 운영체제는 파일을 순차적으로 저장할 수 있다.
- 하나의 긴 연속 블록의 순차로 대용량 파일을 저장하면 디스크 블록 할당에 문제가 발생하는데, 이를 해결하기 위해 운영체제는 한 번에 몇 개의 연속 블록, 즉 확장영역(extent)을 파일에 할당한다.
- 파일에 할당된 다른 확장영역은 디스크에서 서로 인접하지 않을 수 있으며, 블록이 무작위로 할당된 경우 파일에 대한 순차 접근은 블록당 하나의 탐색 대신에 확장영역당 하나의 탐색이 필요하다.
- 충분히 큰 확장영역을 사용하면 데이터 전송 비용과 관련된 탐색 비용을 최소화할 수 있다.
- 시간이 지남에 따라 여러 개의 착은 추가(append)가 있는 순차 파일은 단편화(fragmented)될 수 있다.
- 단편화를 줄이기 위해 시스템은 디스크에 있는 데이터의 백업본을 만들어서 전체 디스크를 다시 저장할 수 있다.
- 일부 운영체제는 단편화를 줄이기 위해 디스크를 스캔하면서 블록을 이동시키는 유틸리티를 제공한다.
<br>

### 비휘발성 쓰기 버퍼, Nonvolatile write buffer
- 트랜잭션 처리 시스템과 같은 갱신 중심 데이터베이스 프로그램에서는 쓰기 속도가 성능을 좌우한다.
- NVRAM(non-volatile random-access memory)를 사용하여 디스크의 쓰기 속도를 높일수 수 있다.
- NVRAM는 정전에도 내용이 손실되지 않는다.
  - 과거에는 배터리 백업으로 구현하였으나 현재는 플래시 메모리로 구현
- 쓰기 요청이 들어오면 비휘발성 쓰기 버퍼에 기록하고 쓰기가 완료되었으면 운영체제에 알린다.
- 컨트롤러는 알고리즘을 이용해 디스크 암을 최소화하는 방식으로 디스크상의 목적지에 데이터를 쓴다.
- NVRAM 버퍼가 가득 찬 경우에만 시스템 지연 인식 가능
- NVRAM는 RAID 컨트롤러에서 자주 발견된다.