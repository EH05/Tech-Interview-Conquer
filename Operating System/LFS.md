<details>
  <summary><strong>로그 기반 파일 시스템이란 무엇이고, 어떻게 디스크에서 읽어오나요?</strong></summary>

<br>

  ### LFS(로그 기반 파일 시스템)

  디스크 기록 시, 모든 갱신 정보를 (메타데이터를 포함한) 세그멘트가 불리는 메모리 자료구조에 보관하고, 세그멘트가 가득차면 디스크에서 빈 공간을 찾아 한 번에 기록하는 시스템입니다.
  (기존 내용을 덮어쓰지 않는다는 점)

1. 체크포인트 영역을 디스크에서 가장 먼저 읽는다.
    - 전체 아이노드맵 블럭들을 가리키는 포인터를 갖고 있다.
    - 체크포인트: 디스크 상에서 약속된 위치에 각 imap 블럭들의 위치를 기록한 것
    - imap: 아이노드 번호를 입력으로 가장 최신 아이노드 디스크 위치를 구할 수 있다. (간접 계층)
2. LFS는 아이노드 맵 전체를 읽어 메모리애 캐시한다. 파일의 아이노드 번호를 구한다.
3. 파일에서 블럭을 읽기 위해 직접 포인터를 따라가거나 간접/이중 등 필요에 따라 따라간다.
    - 보통의 경우 LFS는 일반 파일 시스템이 수행하는 개수 만큼의 I/O를 처리
  
</details>

<details>
  <summary><strong>LFS의 가비지 컬렉션은 어떻게 일어나나요?</strong></summary>

<br>

  ### 가비지 컬렉션

  : 사용하지 않는 메모리를 자동으로 해제하는 동작

  LFS는 최신 버전 파일만 유지하므로, 주기적으로 이전 버전의 데이터와 아이노드, 다른 자료구조를 찾아 제거한다.

  - 세그먼트 단위로 동작한다.
  - 오래된 세그멘트를 읽은 후, 최신 블럭 개수를 파악한다.
  - 최신 버전 블럭들을 새로운 세그멘트로 이동시킨 후, 기존 세그멘트들을 빈 공간으로 표시한다.
  - 이 때, M개를 읽고, N개의 새로운 세그멘트를 채우는데 (N<M), N개의 세그멘트를 디스크의 새로운 위치에 쓰고, M개를 해제함으로써 연속적인 공간을 확보할 수 있다.
  
</details>
