# 브라우저 렌더링 과정

---

## 면접 질문 예시

> "브라우저가 HTML, CSS, JavaScript를 읽고 렌더링하는 전체 과정을 단계별로 설명해 주실 수 있나요? 각 단계에서 어떤 작업이 이루어지며, 특히 JavaScript가 파싱 및 실행 과정에서 어떻게 DOM이나 CSSOM을 수정하고, 그로 인해 렌더링에 어떤 영향을 미치는지 구체적으로 말씀해 주세요."

---

<details>
  <summary><h2> 평가 요소 및 평가 요소 별 모범 답안</h2></summary>

  ### 1. HTML 파싱 및 DOM 생성
  - 포함내용
    - 브라우저는 HTML 문서를 네트워크에서 받아와 HTML 파서를 사용해 태그들을 해석하고, 이를 기반으로 DOM(Document Object Model) 트리를 생성한다.
    - DOM 트리는 웹 페이지의 구조와 콘텐츠를 표현한다.
  - <details>
    <summary>모범 답안 예시 : </summary>
    
      > "브라우저는 서버로부터 HTML 문서를 받아오고, HTML 파서를 통해 문서 내의 태그를 해석하여 DOM 트리를 생성합니다. 이 DOM 트리는 웹 페이지의 구조와 콘텐츠를 나타내며, 이후 렌더링 과정의 기초가 됩니다."
    </details>

  ### 2. CSS 파싱 및 CSSOM 생성
  - 포함내용
    - HTML 문서와 함께 로드된 외부 및 내부 CSS 파일을 파싱해 CSSOM(CSS Object Model) 트리를 생성한다.
    - CSSOM은 각 DOM 요소에 적용될 스타일 정보를 포함한다.
  - <details>
    <summary>모범 답안 예시 : </summary>
    
      > "동시에, 브라우저는 HTML에 포함된 CSS 파일을 파싱하여 CSSOM 트리를 생성합니다. CSSOM은 각 요소에 적용될 스타일 정보를 담아, 최종 렌더링에 사용될 스타일을 결정하는 데 중요한 역할을 합니다."
    </details>

  ### 3. JavaScript 로딩, 실행 및 DOM/CSSOM 수정
  - 포함내용
    - HTML 파싱 중에 `<script>` 태그를 만나면 JavaScript 파일을 로드하고 실행한다.
    - JavaScript는 DOM과 CSSOM을 동적으로 수정할 수 있으며, 이로 인해 렌더링 과정이 재실행(Reflow/Repaint)될 수 있다.
    - `async`와 `defer` 속성을 사용하면 스크립트가 비동기적으로 로드되어 파싱 차단을 줄일 수 있다.
  - <details>
    <summary>모범 답안 예시 : </summary>

      > "HTML 파싱 도중에 `<script>` 태그를 만나면, 브라우저는 해당 JavaScript 파일을 로드하여 실행합니다. 이때, JavaScript는 DOM이나 CSSOM을 동적으로 수정할 수 있어 렌더링 결과에 직접적인 영향을 미치게 됩니다. 예를 들어, 동기적으로 실행되는 스크립트는 HTML 파싱을 차단하지만, `async`나 `defer` 속성을 사용하면 비동기적으로 로드되어 전체 렌더링 성능을 향상시킬 수 있습니다."
    </details>

  ### 4. 렌더 트리 생성
  - 포함내용
    - 생성된 DOM과 CSSOM을 결합하여, 실제 화면에 표시될 요소들만을 포함하는 렌더 트리를 생성한다.
    - 렌더 트리는 화면에 그려질 콘텐츠의 구조와 스타일을 최종 결정한다.
  - <details>
    <summary>모범 답안 예시 : </summary>
    
      > "이후, 브라우저는 생성된 DOM과 CSSOM을 결합하여 렌더 트리를 만듭니다. 이 렌더 트리는 실제로 화면에 표시될 요소들만을 포함하며, 최종적인 스타일과 레이아웃을 결정하는 데 사용됩니다."
    </details>

  ### 5. 레이아웃 계산 (Reflow)
  - 포함내용
    - 렌더 트리를 바탕으로 각 요소의 위치, 크기, 배치 등을 계산하는 레이아웃(또는 리플로우) 과정을 수행한다.
    - JavaScript로 인한 DOM 수정은 추가적인 레이아웃 계산을 유발할 수 있다.
      - 그러나 JavaScript가 재실행되는것은 아니다. 기존의 자바스크립트가 실행된 결과가 레이아웃 계산에 영향을 미치는 것
  - <details>
    <summary>모범 답안 예시 : </summary>
    
      > "렌더 트리를 기반으로, 브라우저는 각 요소의 정확한 위치와 크기를 계산하는 레이아웃 단계를 거칩니다. 이 단계에서, JavaScript에 의한 DOM 변경으로 인한 재계산이 발생할 수 있습니다."
    </details>

  ### 6. 페인트(Paint) 및 컴포지팅
  - 포함내용
    - 레이아웃 계산이 완료되면, 각 요소를 픽셀 단위로 변환하여 화면에 그리는 페인트 과정을 진행한다.
      - 페인트(Paint): 렌더 트리의 각 요소를 실제 픽셀로 변환하여, 개별 레이어에 그림을 그리는 작업
    - 복잡한 페이지의 경우, 여러 레이어로 분리된 후 컴포지팅 과정을 통해 최종 화면을 합성한다.
      - 컴포지팅(Compositing): 여러 레이어에 그려진 내용을 합쳐 최종 화면에 표시할 이미지를 구성하는 단계
  - <details>
    <summary>모범 답안 예시 : </summary>
    
      > "계산된 레이아웃을 바탕으로, 브라우저는 각 요소를 실제 픽셀로 변환하는 페인트 과정을 수행합니다. 이후, 여러 레이어로 분리된 요소들을 합성하는 컴포지팅 과정을 통해 최종적으로 사용자에게 보여질 화면이 완성됩니다."
    </details>
  
  ### 7. 심화지식
  - 포함내용
    - 비동기 로딩 최적화: `async`, `defer` 속성을 활용하여 스크립트 로딩이 렌더링을 차단하지 않도록 한다.
      - async:
        - 스크립트가 비동기적으로 다운로드되며, 다운로드가 완료되는 즉시 실행
        - 실행 시점은 HTML 파싱과 병렬로 이루어지므로, 스크립트 실행이 파싱을 잠시 중단할 수 있다.
        - 여러 async 스크립트가 있을 경우, 실행 순서는 다운로드 완료 순서에 따라 달라지므로 순서 보장이 어렵다.
      - defer:
        - 스크립트가 비동기적으로 다운로드되지만, HTML 파싱이 모두 완료된 후에 실행
        - 따라서 스크립트 실행이 파싱을 방해하지 않고, 문서의 순서가 보장
        - 보통 DOM 조작이나 렌더링 이후에 실행되어야 하는 스크립트에 적합
    - 크리티컬 렌더링 패스: 중요한 콘텐츠가 우선적으로 로드될 수 있도록 최적화한다.
    - 재페인트 및 레이아웃 재계산 최소화: DOM 변경에 따른 재계산을 줄이는 방법.
    - 하드웨어 가속: GPU를 활용한 컴포지팅을 통해 부드러운 렌더링을 구현한다.
  - <details>
    <summary>모범 답안 예시 : </summary>
    
      > "추가적으로, 브라우저는 `async`와 `defer` 속성을 활용하여 스크립트 로딩이 렌더링을 차단하지 않도록 하고, 크리티컬 렌더링 패스 최적화를 통해 중요한 콘텐츠를 우선적으로 로드합니다. 또한, DOM 변경에 따른 재페인트와 레이아웃 재계산을 최소화하는 최적화 기법과 GPU 하드웨어 가속을 통해 전체 렌더링 성능을 개선할 수 있습니다."
    </details>
</details>
