
# 동기, 비동기

---

## 면접 질문 예시

> "동기와 비동기 그리고 블로킹과 논블로킹에 대해서 설명해 주세요”

---

<details>
  <summary><h2> 평가 요소 및 모범 답안</h2></summary>

  ### 1. 동기, 비동기 정의 및 개념 이해
  - 포함내용  
    결과를 받을 때까지 다음 일을 할 수 있는가?
    * 동기
      - 정의 : 요청을 보낸 후, 요청이 끝날 때까지 작업을 대기하는 방식(호출한 쪽의 코드 진행이 멈춤)
      - 흐름 : 요청 -> 응답 받음 -> 다음 작업 진행
      - 장점 : 구현이 직관적이고 이해하기(디버깅이) 쉬움
      - 단점 : 하나의 작업이 오래 걸리면 전체 프로세스가 지연
    * 비동기
      - 정의 : 요청을 보낸 후, 요청 완료 여부와 상관없이 다음 작업을 진행하는 방식(호출한 쪽의 코드 진행이 멈추지 않음)
      - 흐름 : 요청 -> 다음 작업 -> 응답이 오면 콜백/이벤트 처리
      - 장점 : 오래 걸리는 작업(I/O)의 대기 시간을 효율적으로 활용 가능
      - 단점 : 코드가 복잡하고(콜백, 이벤트 등), 이해하기(디버깅이) 어려움

  ### 2. 블로킹, 논블로킹 정의 및 개념 이해
  - 포함내용  
    작업을 요청한 주체는 결과를 받기 전에 제어권을 받아 다른 일을 할 수 있는가?
    * 블로킹
      - 정의 : 결과를 받을 때까지 요청한 주체는 제어권이 없어 다른 일을 못함
      - 흐름 : 요청 -> 응답 대기(제어권 대기) -> 다음 요청
      - 장점 : 구현이 직관적이고 이해하기(디버깅이) 쉬움
      - 단점 : 자원(스레드)의 대기 상태로 인해 효율성이 낮아질 수 있음
    * 논블로킹
      - 정의 : 결과를 받지 않아도 요청한 주체는 제어권을 받아 다른 일을 할 수 있음
      - 흐름 : 요청 -> 제어권 반환 -> 다음 요청 -> 완료 될 때 응답 받음
      - 장점 : 자원(스레드)의 대기 시간 최소화로 효율적인 사용 가능
      - 단점 : 코드가 복잡하고(콜백, 이벤트 등), 이해하기(디버깅이) 어려움

 ### 3. 동기, 비동기, 블로킹, 논블로킹 예시
사용자 1명이 해야할 작업 A, B가 있다고 가정하자
1. 동기 + 블로킹
  - 동기 : 사용자는 작업 A를 요청한다. 결과를 받을 때까지 작업 B를 요청하지 못함
  - 블로킹 : 사용자는 작업 A의 결과를 받을 때까지 대기한 후에야 제어권을 받아 작업 B를 요청할 수 있음
2. 동기 + 논블로킹(논블로킹의 이점을 활용할 수 없음)
  - 동기 : 사용자는 작업 A를 요청한다. 결과를 받을 때까지 작업 B를 요청하지 못함
  - 논블로킹 : 사용자는 작업 A의 결과를 받기 전에 제어권으로 작업 B를 요청할 수 있음, 하지만 동기로 인해 작업 요청이 불가능
3. 비동기 + 블로킹(비동기의 이점을 활용할 수 없음)
  - 비동기 : 사용자는 작업 A와 작업 B를 동시에 요청할 수 있다 하지만 블로킹으로 인해 작업 A의 결과를 받기 전에 제어권이 없어 작업 B 요청이 불가능
  - 블로킹 : 사용자는 작업 A의 결과를 받을 때까지 대기한 후에야 제어권을 받아 작업 B를 요청할 수 있음
4. 비동기 + 논블로킹
  - 비동기 : 사용자는 작업 A와 작업 B를 동시에 요청할 수 있음
  - 논블로킹 : 사용자는 작업 A의 결과를 받기 전에 제어권으로 작업 B를 요청할 수 있음

  
  ### 4.모범 답안 예시
    
  "요청을 보낸 후 요청 결과를 받기 전에 다른 작업을 진행할 수 있으면 동기, 없으면 비동기입니다  
   작업을 요청한 주체가 제어권을 받기 위해 결과를 기다려야 하면 블로킹, 기다리지 않아도 되면 논블로킹입니다  
   예를 들어, 작업 A, B가 있을 때 동시에 A, B를 진행할 수 없으면 동기, 있으면 비동기 입니다  
   작업 A의 결과를 기다려서 제어권을 받아야 다음 작업을 실행할 수 있으면 블로킹, 바로 제어권을 얻어 다음 작업을 실행할 수 있으면 논블로킹입니다"
  

  ### 5. 심화 지식
  
  - 포함내용
    * 논블로킹과 스레드 생성
        > "논블로킹의 경우 결과를 기다리지 않고 다음 작업을 실행하면 새로운 스레드를 생성하는 건가요?"
      - 단일 스레드 + 이벤트 루프(Node.js) : 기존 스레드가 이벤트 큐에서 새로운 이벤트를 꺼내 처리
      - 멀티 스레드 + 쓰레드 풀(Java, Spring WebFlux) : 주 메서드는 다음 작업을 진행하고, 비동기 메서드는 스레드 풀 내의 작업 스레드를 재사용하여 처리
      - 새로운 스레드를 만들지 않고 이벤트 기반 혹은 스레드 풀을 활용
    
    * 동시성과 병렬성
      - 동시성 : 여러 작업이 논리적으로 동시에 실행되는 것, 단일코어 환경이므로 실제 작업은 하나만 이루어지지만 여러 작업을 번갈아 작업하여 동시에 진행되는 느낌을 줌
      - 병령성 : 여러 작업이 물리적으로 동시에 실행되는 것, 멀티코어 환경에서 각각의 코어가 서로 다른 스레드를 실제로 동시에 처리
    * 리액티브 프로그래밍
      - 정의 : 데이터의 흐름(Stream)과 변경 사항(이벤트)에 비동기적으로 반응하는 프로그래밍 스타일
      - 리액티브 프로그래밍은 비동기 기반이며, 블로킹 방식은 리액티브의 장점을 크게 살리지 못하므로 주로 논블로킹 방식과 함께 사용
      - 예시(채팅 어플리케이션)
        1. 새로운(변경 사항) 메시지(데이터의 흐름)가 들어옴
        2. 이벤트로 감지하여 콜백 실행(그 이전에 서버는 다른 이벤트를 비동기 처리)
        3. 메시지를 받은 후 연결된(구독 중인) 다른 클라이언트에 실시간 전송
        4. 하나의 서버로 다수의 채팅 메시지를 동시에 처리 가능
